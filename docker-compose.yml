services:
  # Gluetun VPN container - only starts with --profile vpn
  # Usage: docker compose --profile vpn up -d
  gluetun:
    profiles: ["vpn"]
    image: qmcgaw/gluetun
    container_name: gluetun
    cap_add:
      - NET_ADMIN
    devices:
      - /dev/net/tun:/dev/net/tun
    environment:
      - VPN_SERVICE_PROVIDER
      - VPN_TYPE
      - OPENVPN_CUSTOM_CONFIG=/gluetun/custom/config.ovpn
      - OPENVPN_USER
      - OPENVPN_PASSWORD
      - HTTPPROXY=on
    volumes:
      - ./gluetun:/gluetun
    ports:
      - "8888:8888"
    restart: unless-stopped

  webintel-mcp:
    image: webintel-mcp:latest
    container_name: webintel-mcp
    ports:
      - "3090:3090"
    environment:
      - SEARXNG_HOST
      - STT_ENDPOINT
      - STT_MODEL
      - STT_API_KEY
      - PROXY_URL
    restart: unless-stopped
